<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xmega-usb: max-3420.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>max-3420.c File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &quot;<a class="el" href="max-3420_8h_source.html">max-3420.h</a>&quot;</code><br/>
<code>#include &lt;avr/sleep.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &lt;util/delay.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a7be998674293c9c38ed2f2dd3cbd9159">MAX_USART</a>&#160;&#160;&#160;USARTD1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#aaa7d6285a0080271f45fd48867e67a52">MAX_ASSERT_CS</a>&#160;&#160;&#160;PORTE.OUTCLR = PIN1_bm</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a870c999750790a2e9d928fa9e1989309">MAX_RELEASE_CS</a>&#160;&#160;&#160;PORTE.OUTSET = PIN1_bm</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf95ccb24033c9ee7072c45c97b2f134"></a><!-- doxytag: member="max&#45;3420.c::MAX_ACKSTAT_bm" ref="aaf95ccb24033c9ee7072c45c97b2f134" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_ACKSTAT_bm</b>&#160;&#160;&#160;0x40</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab96dfce6e28f98fbd5c70344f1a4eeea"></a><!-- doxytag: member="max&#45;3420.c::MAX_STLSTAT_bm" ref="ab96dfce6e28f98fbd5c70344f1a4eeea" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_STLSTAT_bm</b>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aacdb2d08c56710ff33fc5c8b4a69b01c"></a><!-- doxytag: member="max&#45;3420.c::MAX_STLEP3IN_bm" ref="aacdb2d08c56710ff33fc5c8b4a69b01c" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_STLEP3IN_bm</b>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad76c8ae792222debdba59eb6d7306086"></a><!-- doxytag: member="max&#45;3420.c::MAX_STLEP2IN_bm" ref="ad76c8ae792222debdba59eb6d7306086" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_STLEP2IN_bm</b>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0153e05f42b57b3ec15bd687591e5375"></a><!-- doxytag: member="max&#45;3420.c::MAX_STLEP1OUT_bm" ref="a0153e05f42b57b3ec15bd687591e5375" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_STLEP1OUT_bm</b>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a86eb709225444249c56b59ca95f913cc"></a><!-- doxytag: member="max&#45;3420.c::MAX_STLEP0OUT_bm" ref="a86eb709225444249c56b59ca95f913cc" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_STLEP0OUT_bm</b>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a062f814e4f6af3cc6173cc4a6b96e559"></a><!-- doxytag: member="max&#45;3420.c::MAX_STLEP0IN_bm" ref="a062f814e4f6af3cc6173cc4a6b96e559" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_STLEP0IN_bm</b>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a68f1572dd5aa935e1e0ff47f6acb8dc6"></a><!-- doxytag: member="max&#45;3420.c::MAX_EP3DISAB_bm" ref="a68f1572dd5aa935e1e0ff47f6acb8dc6" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_EP3DISAB_bm</b>&#160;&#160;&#160;0x80</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f86a0cbe5a247841911da7ae37fb220"></a><!-- doxytag: member="max&#45;3420.c::MAX_EP2DISAB_bm" ref="a3f86a0cbe5a247841911da7ae37fb220" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_EP2DISAB_bm</b>&#160;&#160;&#160;0x40</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6b2e15b4769e860a98cb461c829f1434"></a><!-- doxytag: member="max&#45;3420.c::MAX_EP1DISAB_bm" ref="a6b2e15b4769e860a98cb461c829f1434" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_EP1DISAB_bm</b>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac748f52563eca7a90efa0f0fb0871aea"></a><!-- doxytag: member="max&#45;3420.c::MAX_CTGEP3IN_bm" ref="ac748f52563eca7a90efa0f0fb0871aea" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_CTGEP3IN_bm</b>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a698a05a3a18c9e25f77ab2ba6946ac4c"></a><!-- doxytag: member="max&#45;3420.c::MAX_CTGEP2IN_bm" ref="a698a05a3a18c9e25f77ab2ba6946ac4c" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_CTGEP2IN_bm</b>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c7686aa06743df961eade29b7641710"></a><!-- doxytag: member="max&#45;3420.c::MAX_CTGEP1OUT_bm" ref="a0c7686aa06743df961eade29b7641710" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_CTGEP1OUT_bm</b>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a31710344ce814e8f9cc754a289a0b06a"></a><!-- doxytag: member="max&#45;3420.c::MAX_SUDAVIRQ_bm" ref="a31710344ce814e8f9cc754a289a0b06a" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_SUDAVIRQ_bm</b>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa96fc57686511065dc3f4c2a2e6b6a6a"></a><!-- doxytag: member="max&#45;3420.c::MAX_IN3BAVIRQ_bm" ref="aa96fc57686511065dc3f4c2a2e6b6a6a" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_IN3BAVIRQ_bm</b>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a978f92120d9a439420065f9ca6cf7640"></a><!-- doxytag: member="max&#45;3420.c::MAX_IN2BAVIRQ_bm" ref="a978f92120d9a439420065f9ca6cf7640" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_IN2BAVIRQ_bm</b>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a51adbd74fd7a6bfed5d77beca6433c42"></a><!-- doxytag: member="max&#45;3420.c::MAX_OUT1DAVIRQ_bm" ref="a51adbd74fd7a6bfed5d77beca6433c42" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_OUT1DAVIRQ_bm</b>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abd738628eb787e555144698a963e74f1"></a><!-- doxytag: member="max&#45;3420.c::MAX_OUT0DAVIRQ_bm" ref="abd738628eb787e555144698a963e74f1" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_OUT0DAVIRQ_bm</b>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c616bf1acf225a7ed827e39d50d55d6"></a><!-- doxytag: member="max&#45;3420.c::MAX_IN0BAVIRQ_bm" ref="a9c616bf1acf225a7ed827e39d50d55d6" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_IN0BAVIRQ_bm</b>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0732d02fe558c0c4b446c704b470e33b"></a><!-- doxytag: member="max&#45;3420.c::MAX_SUDAVIE_bm" ref="a0732d02fe558c0c4b446c704b470e33b" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_SUDAVIE_bm</b>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a30f7016014c3e07d6304004bbb4ed7c5"></a><!-- doxytag: member="max&#45;3420.c::MAX_IN3BAVIE_bm" ref="a30f7016014c3e07d6304004bbb4ed7c5" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_IN3BAVIE_bm</b>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8753f05ef69731277847193c11a6a8f3"></a><!-- doxytag: member="max&#45;3420.c::MAX_IN2BAVIE_bm" ref="a8753f05ef69731277847193c11a6a8f3" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_IN2BAVIE_bm</b>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe3c907f2dca25861c31b4368966d7cf"></a><!-- doxytag: member="max&#45;3420.c::MAX_OUT1DAVIE_bm" ref="afe3c907f2dca25861c31b4368966d7cf" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_OUT1DAVIE_bm</b>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1e4d4b3a6bcb34c94881e2ad898821b2"></a><!-- doxytag: member="max&#45;3420.c::MAX_OUT0DAVIE_bm" ref="a1e4d4b3a6bcb34c94881e2ad898821b2" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_OUT0DAVIE_bm</b>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a5e2954f62b5d665ee348143dc16b79"></a><!-- doxytag: member="max&#45;3420.c::MAX_IN0BAVIE_bm" ref="a1a5e2954f62b5d665ee348143dc16b79" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_IN0BAVIE_bm</b>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad049409bcded5d81c7ae838a86efe2df"></a><!-- doxytag: member="max&#45;3420.c::MAX_URESDNIRQ_bm" ref="ad049409bcded5d81c7ae838a86efe2df" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_URESDNIRQ_bm</b>&#160;&#160;&#160;0x80</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a50b86a5959678bcc203acc522e0497ac"></a><!-- doxytag: member="max&#45;3420.c::MAX_VBUSIRQ_bm" ref="a50b86a5959678bcc203acc522e0497ac" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_VBUSIRQ_bm</b>&#160;&#160;&#160;0x40</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a71669ef9073ea0be8b00d1e972d42333"></a><!-- doxytag: member="max&#45;3420.c::MAX_NOVBUSIRQ_bm" ref="a71669ef9073ea0be8b00d1e972d42333" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_NOVBUSIRQ_bm</b>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af84f0bf3e9bc218a3184d2f9f3637b1b"></a><!-- doxytag: member="max&#45;3420.c::MAX_SUSPIRQ_bm" ref="af84f0bf3e9bc218a3184d2f9f3637b1b" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_SUSPIRQ_bm</b>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a429c3c74a64d234d0eaa11a9cdab7722"></a><!-- doxytag: member="max&#45;3420.c::MAX_URESIRQ_bm" ref="a429c3c74a64d234d0eaa11a9cdab7722" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_URESIRQ_bm</b>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac7f13b403021b5c4aa32f78a7de471db"></a><!-- doxytag: member="max&#45;3420.c::MAX_BUSACTIRQ_bm" ref="ac7f13b403021b5c4aa32f78a7de471db" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_BUSACTIRQ_bm</b>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec226c3406762aa2d122c794ea1a5a17"></a><!-- doxytag: member="max&#45;3420.c::MAX_RWUDNIRQ_bm" ref="aec226c3406762aa2d122c794ea1a5a17" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_RWUDNIRQ_bm</b>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afcd7661e5458801e8247270aa690d9af"></a><!-- doxytag: member="max&#45;3420.c::MAX_OSCOKIRQ_bm" ref="afcd7661e5458801e8247270aa690d9af" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_OSCOKIRQ_bm</b>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a286450fea822cdfbd09dc5bf00c06df8"></a><!-- doxytag: member="max&#45;3420.c::MAX_URESDNIE_bm" ref="a286450fea822cdfbd09dc5bf00c06df8" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_URESDNIE_bm</b>&#160;&#160;&#160;0x80</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6cfe553874684b2c4fbd0f21390610eb"></a><!-- doxytag: member="max&#45;3420.c::MAX_VBUSIE_bm" ref="a6cfe553874684b2c4fbd0f21390610eb" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_VBUSIE_bm</b>&#160;&#160;&#160;0x40</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a159ac8bd4f47698c847a1eadbb2c331e"></a><!-- doxytag: member="max&#45;3420.c::MAX_NOVBUSIE_bm" ref="a159ac8bd4f47698c847a1eadbb2c331e" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_NOVBUSIE_bm</b>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a008e2ab37a5ba9ab29f5bd56a97bd90e"></a><!-- doxytag: member="max&#45;3420.c::MAX_SUSPIE_bm" ref="a008e2ab37a5ba9ab29f5bd56a97bd90e" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_SUSPIE_bm</b>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf616d87189d14f655b07cf00f8bdc2e"></a><!-- doxytag: member="max&#45;3420.c::MAX_URESIE_bm" ref="aaf616d87189d14f655b07cf00f8bdc2e" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_URESIE_bm</b>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab9be324cc602412c0c87ceafe10a2ff0"></a><!-- doxytag: member="max&#45;3420.c::MAX_BUSACTIE_bm" ref="ab9be324cc602412c0c87ceafe10a2ff0" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_BUSACTIE_bm</b>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad3b26f8223c70ba17401b4d7b139134"></a><!-- doxytag: member="max&#45;3420.c::MAX_RWUDNIE_bm" ref="aad3b26f8223c70ba17401b4d7b139134" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_RWUDNIE_bm</b>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a547c0dcca285b7fb066b9867534de2fd"></a><!-- doxytag: member="max&#45;3420.c::MAX_OSCOKIE_bm" ref="a547c0dcca285b7fb066b9867534de2fd" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_OSCOKIE_bm</b>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf0f445e27a126824359638eb2e94070"></a><!-- doxytag: member="max&#45;3420.c::MAX_HOSCSTEN_bm" ref="abf0f445e27a126824359638eb2e94070" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_HOSCSTEN_bm</b>&#160;&#160;&#160;0x80</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6e1c3a965314448bea7816149cfd4866"></a><!-- doxytag: member="max&#45;3420.c::MAX_VBGATE_bm" ref="a6e1c3a965314448bea7816149cfd4866" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_VBGATE_bm</b>&#160;&#160;&#160;0x40</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59801d107015570d500f8a8cb09393ac"></a><!-- doxytag: member="max&#45;3420.c::MAX_CHIPRES_bm" ref="a59801d107015570d500f8a8cb09393ac" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_CHIPRES_bm</b>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d2d1d5a2b6ff6f6dc103d750304e793"></a><!-- doxytag: member="max&#45;3420.c::MAX_PWRDOWN_bm" ref="a5d2d1d5a2b6ff6f6dc103d750304e793" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_PWRDOWN_bm</b>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85eb79ea81912bba687a09e9ee72ca28"></a><!-- doxytag: member="max&#45;3420.c::MAX_CONNECT_bm" ref="a85eb79ea81912bba687a09e9ee72ca28" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_CONNECT_bm</b>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af3ed34be512bea6c0881eb9e9a521003"></a><!-- doxytag: member="max&#45;3420.c::MAX_SIGRWU_bm" ref="af3ed34be512bea6c0881eb9e9a521003" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_SIGRWU_bm</b>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a431036b05048a4440bf344a76019b630"></a><!-- doxytag: member="max&#45;3420.c::MAX_IE_bm" ref="a431036b05048a4440bf344a76019b630" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_IE_bm</b>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a98f875c8da6cfba802c8b5d808297f4b"></a><!-- doxytag: member="max&#45;3420.c::MAX_FDUPSPI_bm" ref="a98f875c8da6cfba802c8b5d808297f4b" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_FDUPSPI_bm</b>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad6838500a56c5862ffaf22c05eae0074"></a><!-- doxytag: member="max&#45;3420.c::MAX_INTLEVEL_bm" ref="ad6838500a56c5862ffaf22c05eae0074" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_INTLEVEL_bm</b>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac09e1a1f06fb10f563574e8c086b01d0"></a><!-- doxytag: member="max&#45;3420.c::MAX_POSINT_bm" ref="ac09e1a1f06fb10f563574e8c086b01d0" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_POSINT_bm</b>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a34d8641738e31e71f7b36562c8faf67f"></a><!-- doxytag: member="max&#45;3420.c::MAX_GPXB_bm" ref="a34d8641738e31e71f7b36562c8faf67f" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_GPXB_bm</b>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd9c9c55d3247a332f3ec6a6422beb50"></a><!-- doxytag: member="max&#45;3420.c::MAX_GPXA_bm" ref="acd9c9c55d3247a332f3ec6a6422beb50" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_GPXA_bm</b>&#160;&#160;&#160;0x01</td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br/>
&#160;&#160;<b>MAX_EP0FIFO</b> =  0&lt;&lt;3, 
<b>MAX_EP1OUTFIFO</b> =  1&lt;&lt;3, 
<b>MAX_EP2INFIFO</b> =  2&lt;&lt;3, 
<b>MAX_EP3INFIFO</b> =  3&lt;&lt;3, 
<br/>
&#160;&#160;<b>MAX_SUDFIFO</b> =  4&lt;&lt;3, 
<b>MAX_EP0BC</b> =  5&lt;&lt;3, 
<b>MAX_EP1OUTBC</b> =  6&lt;&lt;3, 
<b>MAX_EP2INBC</b> =  7&lt;&lt;3, 
<br/>
&#160;&#160;<b>MAX_EP3INBC</b> =  8&lt;&lt;3, 
<b>MAX_EPSTALLS</b> =  9&lt;&lt;3, 
<b>MAX_CLRTOGS</b> =  10&lt;&lt;3, 
<b>MAX_EPIRQ</b> =  11&lt;&lt;3, 
<br/>
&#160;&#160;<b>MAX_EPIEN</b> =  12&lt;&lt;3, 
<b>MAX_USBIRQ</b> =  13&lt;&lt;3, 
<b>MAX_USBIEN</b> =  14&lt;&lt;3, 
<b>MAX_USBCTRL</b> =  15&lt;&lt;3, 
<br/>
&#160;&#160;<b>MAX_CPUCTRL</b> =  16&lt;&lt;3, 
<b>MAX_PINCTRL</b> =  17&lt;&lt;3, 
<b>MAX_REVISION</b> =  18&lt;&lt;3, 
<b>MAX_FNADDR</b> =  19&lt;&lt;3, 
<br/>
&#160;&#160;<b>MAX_IOPINS</b> =  20&lt;&lt;3
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br/>
&#160;&#160;<a class="el" href="max-3420_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a83f2e8cf7059ab67f4a614d8dd3094ab">EP0_BAV_F</a> =  1&lt;&lt;0, 
<a class="el" href="max-3420_8c.html#adf764cbdea00d65edcd07bb9953ad2b7af29626637f4f7a6596dc1740576d263b">EP0_DAV_F</a> =  1&lt;&lt;1, 
<a class="el" href="max-3420_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a4653f51485b62a5d5a818dc0ae19feee">EP1_DAV_F</a> =  1&lt;&lt;2, 
<a class="el" href="max-3420_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ad18222ffd6a75dcdb6443601b14d0db8">EP2_BAV_F</a> =  1&lt;&lt;3, 
<br/>
&#160;&#160;<a class="el" href="max-3420_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a0d1de6f07100c7fec9d164d1a2d53a5a">EP3_BAV_F</a> =  1&lt;&lt;4, 
<a class="el" href="max-3420_8c.html#adf764cbdea00d65edcd07bb9953ad2b7aeb491420571d8be05c606dd73af69f58">SUDAV_F</a> =  1&lt;&lt;5, 
<a class="el" href="max-3420_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a0533ec6fac04af22675db1d884fc51d4">URES_F</a> =  1&lt;&lt;6, 
<a class="el" href="max-3420_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ad510f9105ab6d03a9f280388e158bb50">SUSP_F</a> =  1&lt;&lt;7
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <b>EP0_STALL_F</b> =  1&lt;&lt;0, 
<b>EP1_STALL_F</b> =  1&lt;&lt;1, 
<b>EP2_STALL_F</b> =  1&lt;&lt;2, 
<b>EP3_STALL_F</b> =  1&lt;&lt;3
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a521b31ff4bc4494a914b2a8cabcba31e"></a><!-- doxytag: member="max&#45;3420.c::ISR" ref="a521b31ff4bc4494a914b2a8cabcba31e" args="(PORTE_INT0_vect)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>ISR</b> (PORTE_INT0_vect)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#ae05f46e396d7b3595db96129769b0b1e">initMax3420</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#ac551b9e06492b519fa633a97987eb477">initUsb</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a2f84328ff03656413944a108b950828d">terminateUsb</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#af34a91acee4d06103ec78f28c40bc63b">maxPowerDown</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a476685b39ecb3b9495a6df4073e82d68">usbSuspend</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="max-3420_8h.html#a77091d4f21b50585c2e3f5e6afc567e2">usbEvent_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a057d096ed96855d0dfbdeca53892e961">getUsbEvent</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a56b9daf7ac43f1c4dd3dfe06123be134">getSetupPacket</a> (uint8_t *buffer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a7333c77ad204d4689aeeccd5a94f2615">setDeviceAddress</a> (uint8_t address)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a37fada0e467766a63faff09614645e8e">stallEp</a> (uint8_t ep)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#ae8ec3e1cfef5cfb4c8f9dd4a592db97e">clearStallEp</a> (uint8_t ep)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a08ca1932ba03e58da529a921b864d24c">isEpStalled</a> (uint8_t ep)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a2de8094f2b1cb1e3dd3e26adcbb3153e">writeEp0</a> (uint8_t *buffer, uint8_t length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#ac58a0da3e51dfb894c4c8d7504990f17">writeEp0_P</a> (prog_uint8_t *buffer, uint8_t length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#aaa8b63a0809812ccf3d9cb256fa15b2a">ackStatus</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#ad928c7022748643e4e84b33cfb40d6d2">readEp1</a> (uint8_t *buffer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#aa42977edd2526b8583a45c9f8c26822a">writeEp2</a> (uint8_t *buffer, uint8_t length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="max-3420_8c.html#a8204ae56942050537c7bcfd947b2a63a">writeEp2_P</a> (prog_uint8_t *buffer, uint8_t length)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>max-3420-usb.c xmega-usb</p>
<p>Copyright (c) 2010 Martin Clemons</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="aaa7d6285a0080271f45fd48867e67a52"></a><!-- doxytag: member="max&#45;3420.c::MAX_ASSERT_CS" ref="aaa7d6285a0080271f45fd48867e67a52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ASSERT_CS&#160;&#160;&#160;PORTE.OUTCLR = PIN1_bm</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set MAX3420 CS pin low </p>

</div>
</div>
<a class="anchor" id="a870c999750790a2e9d928fa9e1989309"></a><!-- doxytag: member="max&#45;3420.c::MAX_RELEASE_CS" ref="a870c999750790a2e9d928fa9e1989309" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_RELEASE_CS&#160;&#160;&#160;PORTE.OUTSET = PIN1_bm</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set MAX3420 CS pin high </p>

</div>
</div>
<a class="anchor" id="a7be998674293c9c38ed2f2dd3cbd9159"></a><!-- doxytag: member="max&#45;3420.c::MAX_USART" ref="a7be998674293c9c38ed2f2dd3cbd9159" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_USART&#160;&#160;&#160;USARTD1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>SPI Interface used by MAX3420 </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a06fc87d81c62e9abb8790b6e5713c55b"></a><!-- doxytag: member="max&#45;3420.c::@0" ref="a06fc87d81c62e9abb8790b6e5713c55b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enum holding MAX3420 register addresses. Each address is left-shifted 3 places to comply with MAX3420 command byte format </p>

</div>
</div>
<a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7"></a><!-- doxytag: member="max&#45;3420.c::@1" ref="adf764cbdea00d65edcd07bb9953ad2b7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>USB status flags, used for internal status synchronization. Flags and their bit positions match the bits in MAX3420 status byte. See MAX3420E datasheet "Writing to the SPI Slave Interface (MOSI) in Full-Duplex Mode" for more information. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a83f2e8cf7059ab67f4a614d8dd3094ab"></a><!-- doxytag: member="EP0_BAV_F" ref="adf764cbdea00d65edcd07bb9953ad2b7a83f2e8cf7059ab67f4a614d8dd3094ab" args="" -->EP0_BAV_F</em>&nbsp;</td><td>
<p>Endpoint 0 in buffer available. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7af29626637f4f7a6596dc1740576d263b"></a><!-- doxytag: member="EP0_DAV_F" ref="adf764cbdea00d65edcd07bb9953ad2b7af29626637f4f7a6596dc1740576d263b" args="" -->EP0_DAV_F</em>&nbsp;</td><td>
<p>Endpoint 0 out data available. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a4653f51485b62a5d5a818dc0ae19feee"></a><!-- doxytag: member="EP1_DAV_F" ref="adf764cbdea00d65edcd07bb9953ad2b7a4653f51485b62a5d5a818dc0ae19feee" args="" -->EP1_DAV_F</em>&nbsp;</td><td>
<p>Endpoint 1 data available. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7ad18222ffd6a75dcdb6443601b14d0db8"></a><!-- doxytag: member="EP2_BAV_F" ref="adf764cbdea00d65edcd07bb9953ad2b7ad18222ffd6a75dcdb6443601b14d0db8" args="" -->EP2_BAV_F</em>&nbsp;</td><td>
<p>Endpoint 2 buffer available. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a0d1de6f07100c7fec9d164d1a2d53a5a"></a><!-- doxytag: member="EP3_BAV_F" ref="adf764cbdea00d65edcd07bb9953ad2b7a0d1de6f07100c7fec9d164d1a2d53a5a" args="" -->EP3_BAV_F</em>&nbsp;</td><td>
<p>Endpoint 3 buffer available. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7aeb491420571d8be05c606dd73af69f58"></a><!-- doxytag: member="SUDAV_F" ref="adf764cbdea00d65edcd07bb9953ad2b7aeb491420571d8be05c606dd73af69f58" args="" -->SUDAV_F</em>&nbsp;</td><td>
<p>setup packet available </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7a0533ec6fac04af22675db1d884fc51d4"></a><!-- doxytag: member="URES_F" ref="adf764cbdea00d65edcd07bb9953ad2b7a0533ec6fac04af22675db1d884fc51d4" args="" -->URES_F</em>&nbsp;</td><td>
<p>USB bus reset detected. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="adf764cbdea00d65edcd07bb9953ad2b7ad510f9105ab6d03a9f280388e158bb50"></a><!-- doxytag: member="SUSP_F" ref="adf764cbdea00d65edcd07bb9953ad2b7ad510f9105ab6d03a9f280388e158bb50" args="" -->SUSP_F</em>&nbsp;</td><td>
<p>USB suspend detected. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<a class="anchor" id="a99fb83031ce9923c84392b4e92f956b5"></a><!-- doxytag: member="max&#45;3420.c::@2" ref="a99fb83031ce9923c84392b4e92f956b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Endpoint stall status flags. Used internally to track stall state of endpoints. Accessed using public functions <a class="el" href="max-3420_8c.html#a37fada0e467766a63faff09614645e8e">stallEp()</a>, <a class="el" href="max-3420_8c.html#ae8ec3e1cfef5cfb4c8f9dd4a592db97e">clearStallEp()</a>, and <a class="el" href="max-3420_8c.html#a08ca1932ba03e58da529a921b864d24c">isEpStalled()</a> </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aaa8b63a0809812ccf3d9cb256fa15b2a"></a><!-- doxytag: member="max&#45;3420.c::ackStatus" ref="aaa8b63a0809812ccf3d9cb256fa15b2a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ackStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the MAX3420 ACKSTAT bit </p>

</div>
</div>
<a class="anchor" id="ae8ec3e1cfef5cfb4c8f9dd4a592db97e"></a><!-- doxytag: member="max&#45;3420.c::clearStallEp" ref="ae8ec3e1cfef5cfb4c8f9dd4a592db97e" args="(uint8_t ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearStallEp </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>ep</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clear stalled endpoint specified in ep.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ep</td><td>Endpoint which should be un-stalled. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a56b9daf7ac43f1c4dd3dfe06123be134"></a><!-- doxytag: member="max&#45;3420.c::getSetupPacket" ref="a56b9daf7ac43f1c4dd3dfe06123be134" args="(uint8_t *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t getSetupPacket </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"> <em>buffer</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get USB setup packet from '3420 FIFO and transfer into buffer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to buffer into which setup data is read (8 bytes). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, 1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a057d096ed96855d0dfbdeca53892e961"></a><!-- doxytag: member="max&#45;3420.c::getUsbEvent" ref="a057d096ed96855d0dfbdeca53892e961" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="max-3420_8h.html#a77091d4f21b50585c2e3f5e6afc567e2">usbEvent_t</a> getUsbEvent </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wait for MAX3420 interrupt, then decode IRQ bits to determine which USB even caused interrupt.<br/>
 Some events have automatic internal processing, and all events return corresponding event code. Only events which have interrupt enabled will initially cause IRQ wait loop to terminate, although all IRQ flags in USBIRQ and EPIRQ will be tested.<br/>
 The first flag to match a certain test will be returned, regardless of whether that particular flag caused the interrupt.</p>
<p>The USB_VBUS_LOST event is special in that it will terminate the interrupt wait routine and has the highest priority.</p>
<p>Function calls sleep_mode() while waiting for MAX3420 interrupt, so sleep mode should be such that the INT1 signal or Vbus loss signal can wake the AVR.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns usb event. </dd></dl>

</div>
</div>
<a class="anchor" id="ae05f46e396d7b3595db96129769b0b1e"></a><!-- doxytag: member="max&#45;3420.c::initMax3420" ref="ae05f46e396d7b3595db96129769b0b1e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initMax3420 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize interface to MAX3420 USB controller.<br/>
 Communication with MAX3420 will utilize the XMEGA USART in SPI Master mode.<br/>
 SPI clock should be highest frequency possible (fcpu/2) since MAX3420E supports frequencies of up to 26MHz. Clock phase and polarity are XMEGA defaults - data valid on rising edge of clock. SPI interface will be full-duplex ('3420 FDUPSPI bit = 1).<br/>
 MAX3420 INT pin output set to low level when interrupts are active.<br/>
 MAX3420 will be set to sleep mode when initialization is complete. </p>

</div>
</div>
<a class="anchor" id="ac551b9e06492b519fa633a97987eb477"></a><!-- doxytag: member="max&#45;3420.c::initUsb" ref="ac551b9e06492b519fa633a97987eb477" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initUsb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called to initialize MAX3420 USB connection<br/>
 Sets MAX3420 USB interface to known state and sets configuration for initial USB enumeration. Function enables URESDN interrupt and enables connection of pull-up resistor on Vbus detection. </p>

</div>
</div>
<a class="anchor" id="a08ca1932ba03e58da529a921b864d24c"></a><!-- doxytag: member="max&#45;3420.c::isEpStalled" ref="a08ca1932ba03e58da529a921b864d24c" args="(uint8_t ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t isEpStalled </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>ep</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks stall condition of endpoint specified in ep.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ep</td><td>Endpoint to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 1 if endpoint is stalled, 0 if not stalled. </dd></dl>

</div>
</div>
<a class="anchor" id="af34a91acee4d06103ec78f28c40bc63b"></a><!-- doxytag: member="max&#45;3420.c::maxPowerDown" ref="af34a91acee4d06103ec78f28c40bc63b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxPowerDown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets MAX3420 power down bit </p>

</div>
</div>
<a class="anchor" id="ad928c7022748643e4e84b33cfb40d6d2"></a><!-- doxytag: member="max&#45;3420.c::readEp1" ref="ad928c7022748643e4e84b33cfb40d6d2" args="(uint8_t *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t readEp1 </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"> <em>buffer</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Read from MAX3240 Endpoint 1 Out FIFO.<br/>
 Function waits for endpoint data available IRQ bit to be set, then reads EP1OUTBC register to determinine number of bytes in endpoint FIFO.<br/>
 This number of bytes is read from the FIFO and stored in buffer, and then returned. Aborts read and returns 0 if setup data available, usb reset, or usb suspend IRQ bits are set.</p>
<p>NOTE: buffer passed to function must be at least 64 bytes, since maximum read length is MAX3420 FIFO buffer size.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to buffer to read into. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Bytes read from EP1. </dd></dl>

</div>
</div>
<a class="anchor" id="a7333c77ad204d4689aeeccd5a94f2615"></a><!-- doxytag: member="max&#45;3420.c::setDeviceAddress" ref="a7333c77ad204d4689aeeccd5a94f2615" args="(uint8_t address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setDeviceAddress </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>address</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set USB address of device.<br/>
 This is accomplished automatically by the MAX3420, so this function just sets ACKSTAT bit.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The new address of the device (ignored) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a37fada0e467766a63faff09614645e8e"></a><!-- doxytag: member="max&#45;3420.c::stallEp" ref="a37fada0e467766a63faff09614645e8e" args="(uint8_t ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stallEp </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>ep</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stalls endpoint specified in ep. Since endpoint direction is fixed by MAX3420 hardware, it is not necessary to specify a direction to identify a specific endpoint.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ep</td><td>Enpoint which should be stalled. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2f84328ff03656413944a108b950828d"></a><!-- doxytag: member="max&#45;3420.c::terminateUsb" ref="a2f84328ff03656413944a108b950828d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void terminateUsb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Call this function to terminate USB connection.<br/>
 Resets and puts MAX3420 into power down mode.<br/>
 NOTE: No MAX3420 interrupts are enabled. </p>

</div>
</div>
<a class="anchor" id="a476685b39ecb3b9495a6df4073e82d68"></a><!-- doxytag: member="max&#45;3420.c::usbSuspend" ref="a476685b39ecb3b9495a6df4073e82d68" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbSuspend </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears MAX3420 suspend interrupt and powers down '3420.<br/>
 Should be called immediately after USB_SUSPEND is returned by <a class="el" href="max-3420_8c.html#a057d096ed96855d0dfbdeca53892e961">getUsbEvent()</a> to comply with USB timing specifications.<br/>
 See MAXIM AN3661 "SUSP Interrupt Request Bit". </p>

</div>
</div>
<a class="anchor" id="a2de8094f2b1cb1e3dd3e26adcbb3153e"></a><!-- doxytag: member="max&#45;3420.c::writeEp0" ref="a2de8094f2b1cb1e3dd3e26adcbb3153e" args="(uint8_t *buffer, uint8_t length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t writeEp0 </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write length bytes from buffer to endpoint0IN.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Buffer from which to write endpoint. </td></tr>
    <tr><td class="paramname">length</td><td>Length in bytes to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, 1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ac58a0da3e51dfb894c4c8d7504990f17"></a><!-- doxytag: member="max&#45;3420.c::writeEp0_P" ref="ac58a0da3e51dfb894c4c8d7504990f17" args="(prog_uint8_t *buffer, uint8_t length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t writeEp0_P </td>
          <td>(</td>
          <td class="paramtype">prog_uint8_t *&#160;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Same functionality as writeToEp0In except utilizing buffer in program memory.<br/>
 Used to transmit program memory constants to endpoint 0 in.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Program space buffer from which to write endpoint. </td></tr>
    <tr><td class="paramname">length</td><td>Length in bytes to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, 1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="aa42977edd2526b8583a45c9f8c26822a"></a><!-- doxytag: member="max&#45;3420.c::writeEp2" ref="aa42977edd2526b8583a45c9f8c26822a" args="(uint8_t *buffer, uint8_t length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t writeEp2 </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write to MAX3420 Endpoint 2 In FIFO.<br/>
 Function waits for endpoint buffer available IRQ bit to be set, then writes length bytes from buffer to MAX3420 EP2 FIFO.<br/>
 Aborts write and returns 1 if setup data available, usb reset, or usb suspend IRQ bits are set.</p>
<p>NOTE: Maximum length is MAX3420 FIFO size of 64 bytes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to buffer to write from. </td></tr>
    <tr><td class="paramname">length</td><td>Number of bytes to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 1 on failure, 0 on success. </dd></dl>

</div>
</div>
<a class="anchor" id="a8204ae56942050537c7bcfd947b2a63a"></a><!-- doxytag: member="max&#45;3420.c::writeEp2_P" ref="a8204ae56942050537c7bcfd947b2a63a" args="(prog_uint8_t *buffer, uint8_t length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t writeEp2_P </td>
          <td>(</td>
          <td class="paramtype">prog_uint8_t *&#160;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write to MAX3420 Endpoint 2 In FIFO from buffer in program space.<br/>
 Same as writeEp2 except using buffer in program memory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to program space buffer to write from. </td></tr>
    <tr><td class="paramname">length</td><td>Number of bytes to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 1 on failure, 0 on success. </dd></dl>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sat Dec 11 2010 00:07:36 for xmega-usb by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
